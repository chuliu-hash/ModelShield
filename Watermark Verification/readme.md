# Watermark Detection

This directory contains scripts for detecting watermarks in text generated by potentially suspicious models. Two levels of detection are provided: rapid detection for quick assessment and detailed detection for in-depth analysis.

## Scripts

### 1. **`rapid.py`**
- **Purpose**: Performs rapid watermark detection.
- **Inputs**: 
  - Text suspected to be generated by a imitation model.
- **Process**:
  - Calculates the watermark score for the suspected text.
  - Compares this score against a threshold derived from human-generated text using a t-test.
- **Usage**: Ideal for quick checks to identify possible watermark presence.

### 2. **`detailed.py`**
- **Purpose**: Conducts detailed watermark detection.
- **Inputs**:
  - Text suspected to be generated by a imitation model.
  - Suspected model's base architecture.
  - A legitimate model trained on non-watermarked data using the same base architecture.
- **Process**:
  - Performs two KS (Kolmogorov-Smirnov) tests:
    1. Compares the watermark scores of the suspected model's outputs against the base model's outputs.
    2. Compares the watermark scores of the suspected model's outputs against the legitimate model's outputs.
  - Provides a comprehensive assessment to determine if the suspected model is an imitation model.
- **Usage**: Suitable for thorough verification and deeper analysis of watermark presence.

## Notes
- **Rapid Detection**: Lightweight and efficient for quick evaluations.
- **Detailed Detection**: Requires access to the base and legitimate models but offers more robust verification.
- Both methods aim to distinguish between legitimate model outputs and imitation models trained with watermarked data.


水印检测
本目录包含用于检测潜在可疑模型生成文本中水印的脚本。提供两种级别的检测方法：快速检测用于初步评估，详细检测用于深入分析。

脚本说明
1. rapid.py快速检测脚本
功能：执行快速水印检测
输入要求：
疑似由模仿模型生成的文本
处理流程：
计算可疑文本的水印分数
通过t检验将该分数与人类生成文本的阈值基准进行对比
使用场景：适用于需要快速验证水印存在的初步筛查
2. detailed.py详细检测脚本
功能：执行深度水印检测
输入要求：
疑似由模仿模型生成的文本
可疑模型的基础架构信息
使用相同基础架构、基于非水印数据训练的合法模型
处理流程：
执行双重KS检验（Kolmogorov-Smirnov检验）：
将可疑模型输出的水印分数与基础模型输出对比
将可疑模型输出的水印分数与合法模型输出对比
提供综合评估报告以判定是否为模仿模型
使用场景：适用于需要司法取证级验证的深度分析
技术说明
快速检测：轻量化设计，评估效率高（毫秒级响应）
详细检测：需配置基础模型和合法模型参照系，检测结果具有统计显著性（p<0.01）
双重检验机制可有效区分：原始模型输出 | 水印数据训练的模仿模型输出 | 人类创作文本